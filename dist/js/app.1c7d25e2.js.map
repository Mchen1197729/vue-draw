{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7fcf","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?74c1"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","handleOpenFile","_v","handleSaveFile","handleChooseColor","model","callback","$$v","shapeColor","expression","handleChooseLineWidth","shapeLineWidth","handleClearMap","staticStyle","slot","directives","rawName","handleTest","class","current","currentTabIndex","handleShowSource","handleManageSource","handleCreateImageSource","_l","source","$event","handleAddImage","url","_s","handleDelSource","handleUpdateSource","shape","index","item","cIndex","shapeIndex","handleChooseShape","shapeName","handleMouseDown","handleMousemove","handleMouseup","ref","handleFileChange","handleChooseImage","dialogTitle","dialogFormVisible","rules","form","$set","$refs","imageLink","click","confirmCreateImageSource","staticRenderFns","component","Vue","use","ElementUI","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.1c7d25e2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header-container\"},[_c('div',{staticClass:\"down-box\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleOpenFile}},[_vm._v(\"打开文件\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleSaveFile}},[_vm._v(\"保存文件\")]),_c('div',{staticClass:\"color-box\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"颜色\")]),_c('el-color-picker',{attrs:{\"size\":\"small\"},on:{\"change\":_vm.handleChooseColor},model:{value:(_vm.shapeColor),callback:function ($$v) {_vm.shapeColor=$$v},expression:\"shapeColor\"}})],1),_c('div',{staticClass:\"line-width-box\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"线宽\")]),_c('el-input-number',{attrs:{\"size\":\"small\",\"controls-position\":\"right\",\"min\":1,\"max\":10},on:{\"change\":_vm.handleChooseLineWidth},model:{value:(_vm.shapeLineWidth),callback:function ($$v) {_vm.shapeLineWidth=$$v},expression:\"shapeLineWidth\"}})],1),_c('el-popconfirm',{attrs:{\"title\":\"确定要清空画布吗？\"},on:{\"confirm\":_vm.handleClearMap}},[_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"plain\":\"\",\"size\":\"small\"},slot:\"reference\"},[_vm._v(\"清空画布\")])],1),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"size\":\"small\"},on:{\"click\":_vm.handleTest}},[_vm._v(\"测试\")])],1)]),_c('div',{staticClass:\"main-section\"},[_c('div',{staticClass:\"tool-container\"},[_c('div',{staticClass:\"tool-tabs-box\"},[_c('div',{staticClass:\"title-box\"},[_c('div',{staticClass:\"item source-title\",class:{current: _vm.currentTabIndex===0},on:{\"click\":_vm.handleShowSource}},[_vm._v(\"图元库\")]),_c('div',{staticClass:\"item source-manage\",class:{current: _vm.currentTabIndex===1},on:{\"click\":_vm.handleManageSource}},[_vm._v(\"图元管理 \")]),_c('div',{staticClass:\"item create-btn\",on:{\"click\":_vm.handleCreateImageSource}},[_vm._v(\"创建图元\")])]),_c('div',{staticClass:\"content-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTabIndex===0),expression:\"currentTabIndex===0\"}],staticClass:\"image-sources-box\"},_vm._l((_vm.imageSources),function(source){return _c('div',{key:source.name,staticClass:\"images-source-item\",on:{\"click\":function($event){return _vm.handleAddImage(source)}}},[_c('img',{attrs:{\"src\":source.url,\"alt\":\"\"}}),_c('span',[_vm._v(_vm._s(source.name))])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentTabIndex===1),expression:\"currentTabIndex===1\"}],staticClass:\"image-sources-manage-box\"},_vm._l((_vm.imageSources),function(source){return _c('div',{key:source.name,staticClass:\"image-source-item\"},[_c('img',{attrs:{\"src\":source.url,\"alt\":\"\"}}),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(source.name))]),_c('div',{staticClass:\"operations\"},[_c('el-popconfirm',{attrs:{\"title\":\"确定删除该图元吗？\"},on:{\"confirm\":function($event){return _vm.handleDelSource(source)}}},[_c('span',{staticClass:\"delete\",attrs:{\"slot\":\"reference\"},slot:\"reference\"},[_vm._v(\"删除\")])]),_c('span',{staticClass:\"update\",on:{\"click\":function($event){return _vm.handleUpdateSource(source)}}},[_vm._v(\"修改\")])],1)])}),0)])]),_c('div',{staticClass:\"shape-source-box\"},_vm._l((_vm.shapeArr),function(shape,index){return _c('div',{key:index,staticClass:\"shape-box\"},_vm._l((shape),function(item,cIndex){return _c('div',{key:cIndex,staticClass:\"shape-item\",class:{current:item.index===_vm.shapeIndex},on:{\"click\":function($event){return _vm.handleChooseShape(item.index)}}},[_vm._v(_vm._s(item.shapeName)+\" \")])}),0)}),0)]),_c('div',{staticClass:\"draw-container\",on:{\"mousedown\":_vm.handleMouseDown,\"mousemove\":_vm.handleMousemove,\"mouseup\":_vm.handleMouseup}})]),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"downloadLink\",attrs:{\"href\":\"\"}}),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"uploadLink\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.handleFileChange}}),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"imageLink\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.handleChooseImage}}),_c('el-dialog',{attrs:{\"width\":\"30%\",\"title\":_vm.dialogTitle,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"size\":\"small\",\"rules\":_vm.rules,\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"图元名称\",\"label-width\":'100px',\"prop\":\"name\"}},[_c('el-input',{staticStyle:{\"width\":\"140px\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"图元图片\",\"label-width\":'100px'}},[_c('div',{staticClass:\"avatar-uploader\"},[(_vm.form.url)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.form.url},on:{\"click\":function($event){return _vm.$refs.imageLink.click();}}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\",on:{\"click\":function($event){return _vm.$refs.imageLink.click();}}})])])],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.confirmCreateImageSource}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"header-container\">\r\n     <!-- <div v-show=\"false\" class=\"up-box\">\r\n\r\n      </div>-->\r\n      <div class=\"down-box\">\r\n        <el-button @click=\"handleOpenFile\" size=\"small\">打开文件</el-button>\r\n        <el-button @click=\"handleSaveFile\" size=\"small\">保存文件</el-button>\r\n        <div class=\"color-box\">\r\n          <span class=\"title\">颜色</span>\r\n          <el-color-picker @change=\"handleChooseColor\" v-model=\"shapeColor\" size=\"small\"></el-color-picker>\r\n        </div>\r\n        <div class=\"line-width-box\">\r\n          <span class=\"title\">线宽</span>\r\n          <el-input-number\r\n                  v-model=\"shapeLineWidth\"\r\n                  size=\"small\"\r\n                  controls-position=\"right\"\r\n                  @change=\"handleChooseLineWidth\"\r\n                  :min=\"1\" :max=\"10\"></el-input-number>\r\n        </div>\r\n        <el-popconfirm @confirm=\"handleClearMap\" title=\"确定要清空画布吗？\">\r\n          <el-button style=\"margin-right: 10px;\" slot=\"reference\" type=\"danger\" plain size=\"small\">清空画布</el-button>\r\n        </el-popconfirm>\r\n        <el-button v-show=\"false\" @click=\"handleTest\" size=\"small\">测试</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"main-section\">\r\n      <div class=\"tool-container\">\r\n        <div class=\"tool-tabs-box\">\r\n          <div class=\"title-box\">\r\n            <div @click=\"handleShowSource\" class=\"item source-title\" :class=\"{current: currentTabIndex===0}\">图元库</div>\r\n            <div @click=\"handleManageSource\" class=\"item source-manage\" :class=\"{current: currentTabIndex===1}\">图元管理\r\n            </div>\r\n            <div class=\"item create-btn\" @click=\"handleCreateImageSource\">创建图元</div>\r\n          </div>\r\n          <div class=\"content-box\">\r\n            <div class=\"image-sources-box\" v-show=\"currentTabIndex===0\">\r\n              <div @click=\"handleAddImage(source)\" class=\"images-source-item\" v-for=\"source in imageSources\"\r\n                   :key=\"source.name\">\r\n                <img :src=\"source.url\" alt=\"\">\r\n                <span>{{ source.name }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"image-sources-manage-box\" v-show=\"currentTabIndex===1\">\r\n              <div class=\"image-source-item\" v-for=\"source in imageSources\" :key=\"source.name\">\r\n                <img :src=\"source.url\" alt=\"\">\r\n                <span class=\"name\">{{ source.name }}</span>\r\n                <div class=\"operations\">\r\n                  <el-popconfirm @confirm=\"handleDelSource(source)\" title=\"确定删除该图元吗？\">\r\n                    <span slot=\"reference\" class=\"delete\">删除</span>\r\n                  </el-popconfirm>\r\n                  <span @click=\"handleUpdateSource(source)\" class=\"update\">修改</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"shape-source-box\">\r\n          <div class=\"shape-box\" v-for=\"(shape,index) in shapeArr\" :key=\"index\">\r\n            <div\r\n                    class=\"shape-item\"\r\n                    @click=\"handleChooseShape(item.index)\"\r\n                    v-for=\"(item,cIndex) in shape\"\r\n                    :key=\"cIndex\"\r\n                    :class=\"{current:item.index===shapeIndex}\"\r\n            >{{ item.shapeName }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n              class=\"draw-container\"\r\n              @mousedown=\"handleMouseDown\"\r\n              @mousemove=\"handleMousemove\"\r\n              @mouseup=\"handleMouseup\"\r\n      ></div>\r\n    </div>\r\n    <a href=\"\" ref=\"downloadLink\" v-show=\"false\"></a>\r\n    <input @change=\"handleFileChange\" ref=\"uploadLink\" type=\"file\" v-show=\"false\">\r\n    <input @change=\"handleChooseImage\" ref=\"imageLink\" type=\"file\" v-show=\"false\">\r\n    <el-dialog width=\"30%\" :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form size=\"small\" :rules=\"rules\" :model=\"form\">\r\n        <el-form-item label=\"图元名称\" :label-width=\"'100px'\" prop=\"name\">\r\n          <el-input style=\"width: 140px;\" v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"图元图片\" :label-width=\"'100px'\">\r\n          <div class=\"avatar-uploader\">\r\n            <img @click=\"$refs.imageLink.click();\" v-if=\"form.url\" :src=\"form.url\" class=\"avatar\">\r\n            <i v-else @click=\"$refs.imageLink.click();\" class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"confirmCreateImageSource\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // zrender@5.0.4版本需要这么写\r\n  import * as zrender from 'zrender'\r\n\r\n  export default {\r\n    name: 'App',\r\n    created() {\r\n      console.log(zrender.version)\r\n      // 将本地保存的图元信息提取出来\r\n      this.imageSources = JSON.parse(localStorage.getItem('imageSources')) || []\r\n    },\r\n    mounted() {\r\n      // 给浏览器窗体添加尺寸改变的监听\r\n      window.onresize = this.handleResize\r\n      // 初始化ZRender实例\r\n      this.zr = zrender.init( document.querySelector('.draw-container'), {\r\n        renderer: 'canvas'\r\n      })\r\n      // 创建一个Group实例 然后再Group组实例添加到画布上 以后创建的形状都添加到这个Group实例中\r\n      this.group = new zrender.Group()\r\n      // 将Group实例添加到画布中\r\n      this.zr.add(this.group)\r\n      // 给zrender实例添加鼠标滚轮滚动事件\r\n      this.zr.on('mousewheel', this.throttle(e => {\r\n        // console.log(e.event.target)\r\n        let {wheelDelta} = e\r\n        // 获取当Group实例当前的scaleX&scaleY\r\n        let {scaleX, scaleY} = this.group\r\n        // 获取当前画布的中心点坐标\r\n        let mapWidth = this.zr.getWidth()\r\n        let mapHeight = this.zr.getHeight()\r\n        // 放大的时候每次比之前大0.1倍 缩小的时候每次比之前小0.1倍\r\n        // js里小数的计算不管加减都会有精度问题 所以先将数字转换成扩大十倍然后再缩小十倍 这样就不会出现精度问题了\r\n        if (wheelDelta > 0) {\r\n          // 向上滚动(放大画布)\r\n          this.group.attr({\r\n            scaleX: (scaleX * 10 + 1) / 10,\r\n            scaleY: (scaleY * 10 + 1) / 10,\r\n            originX: mapWidth / 2,\r\n            originY: mapHeight / 2\r\n          })\r\n        } else if (wheelDelta < 0) {\r\n          // 向下滚动(缩小画布)-->最小缩放到正常情况下的0.1倍\r\n          this.group.attr({\r\n            scaleX: (scaleX * 10 - 1) / 10 > 0.1 ? (scaleX * 10 - 1) / 10 : 0.1,\r\n            scaleY: (scaleY * 10 - 1) / 10 > 0.1 ? (scaleY * 10 - 1) / 10 : 0.1,\r\n            originX: mapWidth / 2,\r\n            originY: mapHeight / 2\r\n          })\r\n        }\r\n      }, 50))\r\n      this.zr.on('contextmenu', e => {\r\n        e.event.preventDefault()\r\n        console.log(e)\r\n      })\r\n    },\r\n    data() {\r\n      return {\r\n        shapeArr: [\r\n          [\r\n            {shapeName: '任意线', index: 1},\r\n            {shapeName: '水平线', index: 2},\r\n            {shapeName: '竖直线', index: 3}\r\n          ],\r\n          [\r\n            {shapeName: '矩形', index: 4},\r\n            {shapeName: '圆形', index: 5},\r\n            {shapeName: '文字', index: 6}\r\n          ]\r\n        ],\r\n        shapeLineOptions: [\r\n          {label: '实线', value: null},\r\n          {label: '虚线', value: [5, 5]}\r\n        ],\r\n        // 当前的标签页的下标 --> 0对应 `图元库` 1对应 `图元管理`\r\n        currentTabIndex: 0,\r\n        // shapeIndex 形状的下标 --> 0未选择形状  1任意线  2水平线  3竖直线  4矩形  5圆形  6文字\r\n        shapeIndex: 0,\r\n        // 页面中唯一的zrender实例\r\n        zr: '',\r\n        // Group对象\r\n        group: '',\r\n        // 当前正在画的形状\r\n        shape: null,\r\n        // 默认的颜色是#000\r\n        shapeColor: '#000',\r\n        // 线的类型(实线or虚线) 默认是 实线\r\n        shapeLineDash: null,\r\n        // 线宽\r\n        shapeLineWidth: 5,\r\n        // 鼠标事件的e.button\r\n        button: undefined,\r\n        // 按下鼠标左键时鼠标相对于画布的坐标\r\n        downDot: [undefined, undefined],\r\n        // 抬起鼠标左键时鼠标相对于画布的坐标\r\n        upDot: [undefined, undefined],\r\n        // Group的位移transition开始点的坐标\r\n        transitionStart: [0, 0],\r\n        // Group的位移transition结束的坐标\r\n        transitionEnd: [0, 0],\r\n        // 1.形状的起点是否确定好了\r\n        isShapeStart: false,\r\n        // 2.形状是否正在被修改\r\n        isShapeEditing: false,\r\n        // 3.形状是否已经画完了\r\n        isShapeDone: false,\r\n        // 4.是否正在拖动画布\r\n        isMapMoving: false,\r\n        // 对话框是否显示\r\n        dialogFormVisible: false,\r\n        // 对话框的标题\r\n        dialogTitle: '',\r\n        // 创建的图元\r\n        imageSources: [],\r\n        form: {\r\n          id: '',\r\n          name: '',\r\n          url: ''\r\n        },\r\n        rules: {\r\n          name: [\r\n            {required: true, message: '请输入图元名称', trigger: 'blur'},\r\n            {min: 1, max: 4, message: '长度在1到4个字符', trigger: 'blur'}\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      handleTest(){\r\n        console.log(this.zr.painter.getSvgDom())\r\n      },\r\n      // 点击删除图元\r\n      handleDelSource({name, url}) {\r\n        // console.log({name, url})\r\n        // 更新data中的数据\r\n        this.imageSources = JSON.parse(localStorage.getItem('imageSources')).filter(source => {\r\n          return source.name !== name\r\n        })\r\n        // 将最新的数据保存在本地localStorage中\r\n        localStorage.setItem('imageSources', JSON.stringify(this.imageSources))\r\n      },\r\n      // 点击修改图元\r\n      handleUpdateSource({id, name, url}) {\r\n        this.dialogTitle = '修改图元'\r\n        this.dialogFormVisible = true\r\n        // 设置表单中的数据\r\n        this.form = {id, name, url}\r\n      },\r\n      // 工具函数:还原鼠标的坐标对应于此时画布上的真实的坐标(利用transform对象)\r\n      reverseCoordinate([x0, y0]) {\r\n        let {scaleX, scaleY, transform} = this.group\r\n        // let [m1, m2, m3, m4, m5, m6] = transform || [0, 0, 0, 0, 0, 0]\r\n        if (!transform) return [x0 / scaleX, y0 / scaleY]\r\n        else return [(x0 - transform[4]) / scaleX, (y0 - transform[5]) / scaleY]\r\n      },\r\n      //节流:频繁触发的事件，保证每次只在固定的时间间隔内处理一次\r\n      throttle(fn, delay) {\r\n        let flag = true\r\n        return function (...args) {\r\n          if (flag) {\r\n            flag = false\r\n            setTimeout(() => {\r\n              fn.apply(this, args)\r\n              flag = true\r\n            }, delay)\r\n          }\r\n        }\r\n      },\r\n      // 容器尺寸发生改变\r\n      handleResize() {\r\n        // 动态调整画布的尺寸\r\n        this.zr.resize()\r\n      },\r\n      // 工具函数:将用户手动选择的文件直接画在画布中\r\n      initDraw(obj) {\r\n        let {transform, children} = obj\r\n        children.forEach(({shapeIndex, shape, style, x, y, scaleX, scaleY, originX, originY}) => {\r\n          let {stroke: color, lineWidth, lineDash} = style\r\n          if (shapeIndex === 1) {\r\n            let {x1, y1, x2, y2} = shape\r\n            this.drawLine({x1, y1, x2, y2, color, lineWidth, lineDash})\r\n          } else if (shapeIndex === 4) {\r\n            let {x, y, width, height} = shape\r\n            this.drawRect({x, y, width, height, color, lineWidth, lineDash})\r\n          } else if (shapeIndex === 5) {\r\n            let {cx, cy, r} = shape\r\n            this.drawCircle({cx, cy, r, color, lineWidth, lineDash})\r\n          } else if (shapeIndex === 6) {\r\n            let {x, y, fill, text, fontSize} = style\r\n            this.drawText({x, y, text, color: fill, fontSize})\r\n          }\r\n          this.shape.attr({x, y, scaleX, scaleY, originX, originY})\r\n        })\r\n        // 进行Group的形变\r\n        this.group.attr({...transform})\r\n      },\r\n      // 触发隐藏的a链接点击事件 让浏览器保存文件\r\n      download(obj, filename) {\r\n        this.$refs.downloadLink.href = 'data:text/plain,' + encodeURIComponent(JSON.stringify(obj, null, 2))\r\n        this.$refs.downloadLink.download = filename\r\n        this.$refs.downloadLink.click()\r\n      },\r\n      // 触发隐藏的文件选择框的点击事件 让浏览器打开文件系统\r\n      upload() {\r\n        this.$refs.uploadLink.click()\r\n      },\r\n      // 文件选择框的文件改变事件\r\n      handleFileChange(e) {\r\n        let reader = new FileReader()\r\n        reader.onload = e1 => {\r\n          try {\r\n            let obj = JSON.parse(e1.target.result.toString())\r\n            this.initDraw(obj)\r\n            // 手动将文件选择框的值置空 避免下一次选择了同一个文件而不触发onchange事件监听\r\n            e.target.value = ''\r\n          } catch (_) {\r\n            console.error('文件格式错误')\r\n          }\r\n        }\r\n        reader.readAsText(e.target.files[0])\r\n      },\r\n      // 图片选择框的change事件\r\n      handleChooseImage(e) {\r\n        let reader = new FileReader()\r\n        reader.onload = e1 => {\r\n          this.form.url = e1.target.result\r\n          // 手动将文件选择框的值置空 避免下一次选择了同一个文件而不触发onchange事件监听\r\n          e.target.value = ''\r\n        }\r\n        reader.readAsDataURL(e.target.files[0])\r\n      },\r\n      // 统一的画形状的函数(不包含1.文字和2.图片)\r\n      drawShape(opts) {\r\n        let {shapeColor: color, shapeLineWidth: lineWidth, shapeLineDash: lineDash, shapeIndex} = this\r\n        // 获取当前的Group的形变信息\r\n        let {x, y, scaleX, scaleY, originX, originY} = this.group\r\n        if (shapeIndex === 0) {\r\n          return\r\n        }\r\n        if (shapeIndex === 1) {\r\n          // 画任意线\r\n          let {x1, y1, x2, y2} = opts\r\n          let [x11, y11] = this.reverseCoordinate([x1, y1])\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          return this.drawLine({x1: x11, y1: y11, x2: x22, y2: y22, color, lineWidth, lineDash})\r\n        }\r\n        if (shapeIndex === 2) {\r\n          // 画水平线\r\n          let {x1, y1, x2, y2} = opts\r\n          let [x11, y11] = this.reverseCoordinate([x1, y1])\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          return this.drawLine({x1: x11, y1: y11, x2: x22, y2: y11, color, lineWidth, lineDash})\r\n        }\r\n        if (shapeIndex === 3) {\r\n          // 画竖直线\r\n          let {x1, y1, x2, y2} = opts\r\n          let [x11, y11] = this.reverseCoordinate([x1, y1])\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          return this.drawLine({x1: x11, y1: y11, x2: x11, y2: y22, color, lineWidth, lineDash})\r\n        }\r\n        if (shapeIndex === 4) {\r\n          // 画矩形\r\n          let {x1, y1, x2, y2} = opts\r\n          let [x11, y11] = this.reverseCoordinate([x1, y1])\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          return this.drawRect({\r\n            x: x11, y: y11,\r\n            width: Math.abs(x22 - x11),\r\n            height: Math.abs(y22 - y11),\r\n            color, lineWidth, lineDash\r\n          })\r\n        }\r\n        if (shapeIndex === 5) {\r\n          // 画圆形\r\n          let {x1, y1, x2, y2} = opts\r\n          let [x11, y11] = this.reverseCoordinate([x1, y1])\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          return this.drawCircle({\r\n            cx: x11, cy: y11,\r\n            r: Math.sqrt((x22 - x11) ** 2 + (y22 - y11) ** 2),\r\n            color, lineWidth, lineDash\r\n          })\r\n        }\r\n      },\r\n      // 统一的修改形状样式的工具函数\r\n      attrShape(opts) {\r\n        let {shapeIndex} = this\r\n        let {x2, y2} = opts\r\n        if (shapeIndex === 1) {\r\n          // 修改任意线\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          this.shape.attr('shape', {x2: x22, y2: y22})\r\n        } else if (shapeIndex === 2) {\r\n          // 修改水平线\r\n          let {x1, y1} = this.shape.shape\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          this.shape.attr('shape', {x2: x22, y2: y1})\r\n        } else if (shapeIndex === 3) {\r\n          // 修改竖直线\r\n          let {x1, y1} = this.shape.shape\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          this.shape.attr('shape', {x2: x1, y2: y22})\r\n        } else if (shapeIndex === 4) {\r\n          // 修改矩形\r\n          let {x, y} = this.shape.shape\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          this.shape.attr('shape', {\r\n            width: x22 - x,\r\n            height: y22 - y\r\n          })\r\n        } else if (shapeIndex === 5) {\r\n          // 修改圆形\r\n          let {cx, cy} = this.shape.shape\r\n          let [x22, y22] = this.reverseCoordinate([x2, y2])\r\n          this.shape.attr('shape', {\r\n            r: Math.sqrt((x22 - cx) ** 2 + (y22 - cy) ** 2)\r\n          })\r\n        }\r\n      },\r\n      // 进行整体画布的位移的工具函数\r\n      translateGroup(opts) {\r\n        let {x, y} = opts\r\n        this.group.attr({x, y})\r\n      },\r\n      // 画直线的工具函数\r\n      drawLine({x1, y1, x2, y2, color, lineWidth, lineDash}) {\r\n        this.shape = new zrender.Line({\r\n          shapeIndex: 1,\r\n          draggable: true,\r\n          shape: {x1, y1, x2, y2},\r\n          style: {\r\n            stroke: color,\r\n            lineWidth,\r\n            lineDash,\r\n            strokeNoScale: true //加上以后,线的粗细不会变,但是起点终点还是会改变\r\n          },\r\n        })\r\n        this.group.add(this.shape)\r\n      },\r\n      // 画矩形的工具函数\r\n      drawRect({x, y, width, height, color, lineWidth, lineDash}) {\r\n        this.shape = new zrender.Rect({\r\n          draggable: true,\r\n          shapeIndex: 4,\r\n          shape: {x, y, width, height, r: lineWidth / 10},\r\n          style: {\r\n            stroke: color,\r\n            lineWidth,\r\n            fill: 'none', //内部为透明色\r\n            lineDash,\r\n            strokeNoScale: true //加上以后,线的粗细不会变,但是起点终点还是会改变\r\n          }\r\n        })\r\n        this.group.add(this.shape)\r\n      },\r\n      // 画圆形的工具函数\r\n      drawCircle({cx, cy, r, color, lineWidth, lineDash}) {\r\n        this.shape = new zrender.Circle({\r\n          shapeIndex: 5,\r\n          draggable: true,\r\n          shape: {cx, cy, r},\r\n          style: {\r\n            fill: 'none',\r\n            lineWidth,\r\n            stroke: color,\r\n            lineDash,\r\n            strokeNoScale: true //加上以后,线的粗细不会变,但是起点终点还是会改变\r\n          }\r\n        })\r\n        this.group.add(this.shape)\r\n      },\r\n      // 添加文字的工具函数\r\n      drawText({x, y, text, fontSize, color}) {\r\n        this.shape = new zrender.Text({\r\n          shapeIndex: 6,\r\n          draggable: true,\r\n          shape: {},\r\n          style: {\r\n            x, y,\r\n            text,\r\n            fontSize,\r\n            align: 'center',\r\n            verticalAlign: 'center',\r\n            fill: color, // 文字颜色\r\n          },\r\n        })\r\n        this.group.add(this.shape)\r\n      },\r\n      // 画图片的工具函数\r\n      drawImage({url, x, y, width, height}) {\r\n        this.shape = new zrender.Image({\r\n          shapeIndex: 7,\r\n          draggable: true,\r\n          shape: {},\r\n          style: {x, y, width, height, image: url},\r\n        })\r\n        this.group.add(this.shape)\r\n      },\r\n      // 展示图元库\r\n      handleShowSource() {\r\n        this.currentTabIndex = 0\r\n      },\r\n      // 展示管理图元\r\n      handleManageSource() {\r\n        this.currentTabIndex = 1\r\n      },\r\n      // 创建图元\r\n      handleCreateImageSource() {\r\n        this.dialogTitle = '创建图元'\r\n        // 打开对对话框\r\n        this.dialogFormVisible = true\r\n      },\r\n      // 确定创建图元/修改图元\r\n      confirmCreateImageSource() {\r\n        let {name, url, id} = this.form\r\n        if (!name || !url) return\r\n        // 判断该名称的图元是否已经被添加过了\r\n        if (this.dialogTitle === '创建图元') {\r\n          let index = this.imageSources.findIndex(item => item.name === name)\r\n          if (index > -1) {\r\n            return this.$message.error('该图元已经存在')\r\n          }\r\n          this.imageSources.push({id: Date.now(), name, url})\r\n        } else if (this.dialogTitle === '修改图元') {\r\n          this.imageSources = this.imageSources.map(item => {\r\n            if (item.id === id) {\r\n              return {id, name, url}\r\n            }\r\n            return item\r\n          })\r\n        }\r\n        this.form = {id: '', name: '', url: ''}\r\n        this.dialogFormVisible = false\r\n        this.dialogTitle = ''\r\n        // 将已添加的图元同步到本地localStorage\r\n        localStorage.setItem('imageSources', JSON.stringify(this.imageSources))\r\n      },\r\n      // 选择形状\r\n      handleChooseShape(shapeIndex) {\r\n        if (this.shapeIndex === shapeIndex) {\r\n          this.shapeIndex = 0\r\n        } else {\r\n          this.shapeIndex = shapeIndex\r\n          if (shapeIndex === 6) {\r\n            this.$prompt('请输入要添加的文字内容', '消息', {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              inputType: 'textarea',\r\n              inputErrorMessage: '请输入正确格式的文字！',\r\n              inputValidator: (value) => {\r\n                return !!value.trim()\r\n              }\r\n            })\r\n                .then(({value}) => {\r\n                  // 计算此时此刻的画布中心点的坐标 让文字每次都添加在画布的中心点\r\n                  let [x, y] = this.reverseCoordinate([this.zr.getWidth() / 2, this.zr.getHeight() / 2])\r\n                  let {shapeColor, shapeLineWidth} = this\r\n                  this.drawText({\r\n                    x, y, text: value.trim(),\r\n                    fontSize: shapeLineWidth + 10,\r\n                    color: shapeColor\r\n                  })\r\n                })\r\n                .catch(() => {\r\n                  this.$message({\r\n                    type: 'info',\r\n                    message: '取消输入'\r\n                  });\r\n                })\r\n                .finally(() => {\r\n                  this.shapeIndex = 0\r\n                })\r\n          }\r\n        }\r\n      },\r\n      // 选择颜色\r\n      handleChooseColor(shapeColor) {\r\n        this.shapeColor = shapeColor\r\n      },\r\n      // 选择线宽\r\n      handleChooseLineWidth(shapeLineWidth) {\r\n        this.shapeLineWidth = shapeLineWidth\r\n      },\r\n      // 打开文件\r\n      handleOpenFile() {\r\n        this.upload()\r\n      },\r\n      // 保存文件\r\n      handleSaveFile() {\r\n        let mapJson = {transform: {}, children: []}\r\n        // 得到Group的Transform变换信息\r\n        let {x, y, scaleX, scaleY, originX, originY} = this.group\r\n        mapJson.transform = {x, y, scaleX, scaleY, originX, originY}\r\n        mapJson.children = this.group.children().map(child => {\r\n          // shape是每个图形的坐标信息\r\n          // shapeIndex是自定义的图形的类型(自定义的字典)\r\n          // style是每个图形的样式相关的信息\r\n          // x, y, scaleX, scaleY, originX, originY是每个图形的Transform变换的信息\r\n          let {shape, shapeIndex, style, x, y, scaleX, scaleY, originX, originY} = child\r\n          return {\r\n            shapeIndex,\r\n            shape: Object.fromEntries(Object.entries(shape)),\r\n            style: Object.fromEntries(Object.entries(style)),\r\n            x, y, scaleX, scaleY, originX, originY\r\n          }\r\n        })\r\n        this.download(mapJson, 'shape.json')\r\n      },\r\n      // 清空画布\r\n      handleClearMap() {\r\n        // 移除Group内所有的元素\r\n        this.group.removeAll()\r\n        // 强制zrender实例刷新\r\n        this.zr.refresh()\r\n        // 重置this.shape\r\n        this.shape = null\r\n      },\r\n      /*\r\n      * 设定画图的规则:\r\n      *   1.正常的画图流程:\r\n      *     1.1 先按下鼠标左键,然后在原地抬起鼠标左键 --> 确定形状的起点\r\n      *     1.2 拖动鼠标 --> 选择形状的终点\r\n      *     1.3 按下鼠标左键 --> 确定了形状的终点\r\n      *\r\n      *   2.取消画图的流程:\r\n      *     2.1 先按下鼠标左键,然后在原地抬起鼠标左键 --> 确定形状的起点\r\n      *     2.2 拖动鼠标 --> 选择形状的终点\r\n      *     2.3 按下鼠标右键 --> 取消画图(移除刚刚添加的形状)\r\n      * */\r\n      // 监听画布容器的鼠标按下事件\r\n      // e.zrX:鼠标按下的点距离画布容器左上角的横向的距离\r\n      // e.zrY:鼠标按下的点距离画布容器左上角的纵向的距离\r\n      // e.button 0鼠标左键 1鼠标中键 2鼠标右键\r\n      handleMouseDown(e) {\r\n        const {button, zrX, zrY} = e\r\n        this.button = button\r\n        // 如果是鼠标中键按下\r\n        if (this.isLeftDown) {\r\n          this.downDot = [zrX, zrY]\r\n        } else if (this.idMiddleDown) {\r\n          // 鼠标中间按下则认为是进行画布整体的拖动操作\r\n          this.isMapMoving = true\r\n          // 获取当前Group的位移的值\r\n          let oldX = this.group.x || 0\r\n          let oldY = this.group.y || 0\r\n          this.transitionStart = [zrX - oldX, zrY - oldY]\r\n        }\r\n      },\r\n      // 监听画布容器的鼠标移动事件\r\n      handleMousemove(e) {\r\n        const {button, zrX, zrY} = e\r\n        // 判断形状的起点是否已经确定好了\r\n        if (this.isShapeStart && button === 0) {\r\n          this.isShapeEditing = true\r\n          // 此处应该创建一个事件队列 将频繁触发的鼠标移动事件塞进事件队列中 然后再按先进先出的原则去调用this.attrShape()方法来修改形状的属性\r\n          // Todo...\r\n          // 修改形状的样式\r\n          this.attrShape({x2: zrX, y2: zrY})\r\n        } else if (this.idMiddleDown && this.isMapMoving) {\r\n          // 鼠标中键被按下并且并且移动鼠标则认为是进行画布整体的拖动操作\r\n          this.isMapMoving = true\r\n          this.transitionEnd = [zrX, zrY]\r\n          let [x1, y1] = this.transitionStart\r\n          this.translateGroup({x: zrX - x1, y: zrY - y1})\r\n        }\r\n      },\r\n      // 监听画布容器的鼠标抬起事件\r\n      handleMouseup(e) {\r\n        const {button, zrX, zrY} = e\r\n        // 如果是鼠标左键抬起\r\n        if (this.isLeftDown) {\r\n          this.upDot = [zrX, zrY]\r\n          // 判断形状的起点是否已经确定好了\r\n          let [downDotX, downDotY] = this.downDot\r\n          let [upDotX, upDotY] = this.upDot\r\n          // 鼠标左键按下和抬起的点必须非常近才可以视作确定形状的起点\r\n          if (Math.abs(downDotX - upDotX) <= 1 && Math.abs(downDotY - upDotY) <= 1) {\r\n            this.isShapeStart = true\r\n          }\r\n          // 判断是否是确定终点的操作\r\n          if (this.isShapeStart && this.isShapeEditing) {\r\n            this.isShapeStart = false\r\n            this.isShapeEditing = false\r\n            //确定终点\r\n            this.isShapeDone = true\r\n          }\r\n        } else if (this.idMiddleDown && this.isMapMoving) {\r\n          // 鼠标中键被抬起则认为是进行画布整体的拖动操作\r\n          this.isMapMoving = false\r\n          this.transitionEnd = [zrX, zrY]\r\n        }\r\n      },\r\n      // 处理鼠标右键事件\r\n      handleContextmenu() {\r\n\r\n      },\r\n      // 点击图元库中的图片向画布中添加图\r\n      handleAddImage({name, url}) {\r\n        // console.log({name, url})\r\n        // 计算此时此刻的画布中心点的坐标 让文字每次都添加在画布的中心点\r\n        let [x, y] = this.reverseCoordinate([this.zr.getWidth() / 2, this.zr.getHeight() / 2])\r\n        // 调用画图片的工具函数\r\n        this.drawImage({url, x: x - 50, y: y - 50, width: 100, height: 100})\r\n      }\r\n    },\r\n    computed: {\r\n      // 是否是鼠标左键按下\r\n      isLeftDown() {\r\n        return this.button === 0\r\n      },\r\n      // 是否是鼠标中键按下\r\n      idMiddleDown() {\r\n        return this.button === 1\r\n      },\r\n      // 是否是鼠标右键按下\r\n      isRightDown() {\r\n        return this.button === 2\r\n      },\r\n    },\r\n    watch: {\r\n      isShapeStart(value) {\r\n        if (value) {\r\n          let {color, lineWidth, lineDash} = this\r\n          let [x1, y1] = this.downDot\r\n          let [x2, y2] = this.upDot\r\n          this.drawShape({x1, y1, x2, y2, color, lineWidth, lineDash})\r\n        }\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  @import \"style/variables\";\r\n\r\n  .container {\r\n    user-select: none;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    .header-container {\r\n      width: 100%;\r\n      height: @headerHeight;\r\n      background-color: @headerBgColor;\r\n      border-bottom: 1px solid @commonBorderColor;\r\n\r\n      /*.up-box {\r\n        width: 100%;\r\n        height: @headerHeight/2;\r\n      }*/\r\n\r\n      .down-box {\r\n        padding-left: 10px;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .color-box {\r\n          width: 100px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n\r\n          span.title {\r\n            letter-spacing: 2.5px;\r\n            margin-right: 10px;\r\n          }\r\n        }\r\n\r\n        .line-width-box {\r\n          width: 200px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n\r\n          span.title {\r\n            letter-spacing: 2.5px;\r\n            margin-right: 10px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .main-section {\r\n      height: calc(100% - @headerHeight);\r\n      display: flex;\r\n\r\n      .tool-container {\r\n        width: @toolWidth;\r\n        height: 100%;\r\n        background-color: @toolBgColor;\r\n        border-right: 1px solid @commonBorderColor;\r\n\r\n        .tool-tabs-box {\r\n          width: 100%;\r\n          height: calc(100% - @toolShapeSourceHeight);\r\n          background-color: #fff;\r\n\r\n          .title-box {\r\n            height: 40px;\r\n            background-color: @toolBgColor;\r\n            display: flex;\r\n\r\n            .item {\r\n              cursor: pointer;\r\n              width: 33.333%;\r\n              height: 40px;\r\n              letter-spacing: 2.5px;\r\n              text-align: center;\r\n              line-height: 40px;\r\n\r\n              &:hover {\r\n                color: @activeFontColor;\r\n              }\r\n\r\n              &.current {\r\n                color: @activeFontColor;\r\n                background-color: #fff;\r\n                border-bottom: 2px solid @activeFontColor;\r\n              }\r\n            }\r\n\r\n          }\r\n\r\n          .content-box {\r\n            width: 100%;\r\n            height: calc(100% - 40px);\r\n            overflow-y: auto;\r\n\r\n            .image-sources-box {\r\n              width: 100%;\r\n              max-height: 100%;\r\n              display: flex;\r\n              //justify-content: space-between;\r\n              flex-wrap: wrap;\r\n\r\n              .images-source-item {\r\n                cursor: pointer;\r\n                width: 33.333%;\r\n                height: 100px;\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: center;\r\n\r\n                img {\r\n                  width: 70px;\r\n                  height: 70px;\r\n                  margin-bottom: 5px;\r\n                }\r\n              }\r\n            }\r\n\r\n            .image-sources-manage-box {\r\n              width: 100%;\r\n              max-height: 100%;\r\n\r\n              .image-source-item {\r\n                padding: 2px 10px;\r\n                margin-top: 5px;\r\n                width: 100%;\r\n                height: 60px;\r\n                display: flex;\r\n                letter-spacing: 2.5px;\r\n                justify-content: space-between;\r\n                align-items: center;\r\n                border-bottom: 1px dashed @commonBorderColor;\r\n\r\n                img {\r\n                  width: 50px;\r\n                  height: 50px;\r\n                }\r\n\r\n                .name {\r\n                  font-size: 13px;\r\n                }\r\n\r\n                .operations {\r\n                  font-size: 13px;\r\n                  padding: 5px 10px;\r\n                  padding-right: 0;\r\n\r\n                  .delete {\r\n                    margin-right: 5px;\r\n\r\n                    &:hover {\r\n                      cursor: pointer;\r\n                      color: #F56C6C;\r\n                    }\r\n                  }\r\n\r\n                  .update {\r\n                    margin-left: 5px;\r\n\r\n                    &:hover {\r\n                      cursor: pointer;\r\n                      color: #409EFF;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        .shape-source-box {\r\n          width: 100%;\r\n          height: @toolShapeSourceHeight;\r\n          background-color: @toolBgColor;\r\n          border-top: 1px solid @commonBorderColor;\r\n\r\n          .shape-box {\r\n            width: 100%;\r\n            height: @toolShapeSourceHeight/2;\r\n            display: flex;\r\n\r\n            .shape-item {\r\n              width: 33.333%;\r\n              height: @toolShapeSourceHeight/3;\r\n              text-align: center;\r\n              letter-spacing: 2.5px;\r\n              line-height: @toolShapeSourceHeight/3;\r\n              cursor: pointer;\r\n              background-color: @toolBgColor;\r\n\r\n              &.current {\r\n                background-color: #fff;\r\n                color: #F56C6C;\r\n                border-bottom: 2px solid #F56C6C;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .draw-container {\r\n        width: calc(100% - @toolWidth);\r\n        height: 100%;\r\n        background-color: #fff;\r\n      }\r\n    }\r\n\r\n    .avatar-uploader {\r\n      width: @imageSize;\r\n      height: @imageSize;\r\n      border: 1px dashed #d9d9d9;\r\n      border-radius: 6px;\r\n      cursor: pointer;\r\n      position: relative;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .avatar-uploader:hover {\r\n      border-color: #409EFF;\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n      font-size: 28px;\r\n      color: #8c939d;\r\n      width: @imageSize;\r\n      height: @imageSize;\r\n      line-height: @imageSize;\r\n      text-align: center;\r\n    }\r\n\r\n    .avatar {\r\n      width: @imageSize;\r\n      height: @imageSize;\r\n      display: block;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=01031cf3&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport ElementUI from 'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\n\r\nimport 'normalize.css/normalize.css'\r\nimport './style/index.less'\r\n\r\nVue.use(ElementUI)\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}